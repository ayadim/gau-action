name: "gau"
description: "getallurls (gau) fetches known URLs from many public resource."
branding:
  icon: "activity"
  color: "blue"

inputs:

  domain:
    description: "domain to scan"
    required: false    

  output:
    description: "File to save output result"
    required: false
    default: "gau.log"    

runs:
  using: "composite"
  steps:
    - run: |
        [ ! -x /home/runner/go/bin/gau ] && go install -v github.com/lc/gau/v2/cmd/gau@latest
        [ ! -z ${{ inputs.domain }} ] && echo "domain=${{ inputs.domain}}" >> $GITHUB_ENV
        [ ! -z ${{ inputs.output }} ] && echo "output=--o ${{ inputs.output}}" >> $GITHUB_ENV      
        echo "/home/runner/go/bin/" >> $GITHUB_PATH
      shell: bash

    - run: |
        echo ${{ env.domain }} | /home/runner/go/bin/gau --threads 10
      shell: bash
